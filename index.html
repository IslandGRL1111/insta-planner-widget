<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Insta Planner Widget</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <script>
  const ACCESS_KEY = "insta_widget_access";

  function renderUnlock() {
    document.getElementById("app").innerHTML = `
      <div class="center unlock-screen">
        <input id="code" placeholder="Enter access code" />
        <button class="unlock" id="unlockBtn">
          Unlock Insta Widget
        </button>
      </div>
    `;

    document
      .getElementById("unlockBtn")
      .addEventListener("click", unlock);
  }

  function unlock() {
    const token = document.getElementById("code").value;

    if (!token) {
      console.log("No token entered");
      return;
    }

    // TEMP SAFE UNLOCK (no API, no alert)
    localStorage.setItem(ACCESS_KEY, token);
    loadWidget();
  }

  function loadWidget() {
    document.getElementById("app").innerHTML = `
      <div class="center">
        <strong>✨ Widget Unlocked ✨</strong>
      </div>
    `;
  }

  // BOOT
  const saved = localStorage.getItem(ACCESS_KEY);
  if (saved) {
    loadWidget();
  } else {
    renderUnlock();
  }
</script>
</body>
</html>
